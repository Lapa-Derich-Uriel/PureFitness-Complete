@model List<PureFitness.Models.EquipmentItem>

@{
    var equipmentName = ViewBag.EquipmentName as string ?? "Equipment";
    var equipmentId = ViewBag.EquipmentId as int?;
}

<form id="itemsForm">
    @Html.AntiForgeryToken()

    <!-- Modal Header -->
    <div class="modal-header bg-primary text-white">
        <h5 class="modal-title mb-0">
            <i class="bi bi-tools me-2"></i> Items for @equipmentName
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>

    <!-- Modal Body -->
    <div class="modal-body">
        @if (Model != null && Model.Any())
        {
            <div class="table-responsive">
                <table class="table table-sm align-middle table-hover mb-0">
                    <thead class="table-light">
                        <tr>
                            <th scope="col">Item Name</th>
                            <th scope="col" style="width: 180px;">Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>@item.EquipmentItemName</td>
                                <td>
                                    <select class="form-select form-select-sm item-status"
                                            data-id="@item.EquipmentItemId">
                                        @if (item.EquipmentItemStatus == "Available")
                                        {
                                            <option value="Available" selected>Available</option>
                                            <option value="Under Maintenance">Under Maintenance</option>
                                            <option value="Out of Order">Out of Order</option>
                                        }
                                        else if (item.EquipmentItemStatus == "Under Maintenance")
                                        {
                                            <option value="Available">Available</option>
                                            <option value="Under Maintenance" selected>Under Maintenance</option>
                                            <option value="Out of Order">Out of Order</option>
                                        }
                                        else
                                        {
                                            <option value="Available">Available</option>
                                            <option value="Under Maintenance">Under Maintenance</option>
                                            <option value="Out of Order" selected>Out of Order</option>
                                        }
                                    </select>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
        else
        {
            <div class="text-center py-4 text-muted">
                <i class="bi bi-exclamation-circle me-2"></i>No items found for this equipment.
            </div>
        }
    </div>

    <!-- Modal Footer -->
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
            <i class="bi bi-x-circle me-1"></i> Close
        </button>
        <button type="submit" class="btn btn-primary">
            <i class="bi bi-check2-circle me-1"></i> Save Changes
        </button>
    </div>
</form>
